<header class="site-header" role="banner">
  <div class="container">
    <a href="{{ '/' | relative_url }}" class="site-logo">{{ site.data.site.name }}</a>
    
    <nav class="site-nav" role="navigation" aria-label="Main navigation">
      <button class="nav-toggle" 
              type="button"
              aria-expanded="false" 
              aria-controls="nav-list" 
              aria-label="Open menu"
              id="nav-toggle">
        <span class="nav-toggle-icon" aria-hidden="true"></span>
      </button>
      
      <ul class="nav-list" id="nav-list">
        {% for item in site.data.navigation.main %}
        <li class="nav-item">
          <a href="{{ item.url | relative_url }}"{% if page.url == item.url %} aria-current="page"{% endif %}>{{ item.title }}</a>
        </li>
        {% endfor %}
        <li class="nav-item nav-item-cta">
          <a href="/contact/" class="btn btn-primary btn-sm">Contact</a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var toggle = document.getElementById('nav-toggle');
  var navList = document.getElementById('nav-list');
  
  if (!toggle || !navList) {
    console.log('Nav elements not found');
    return;
  }
  
  function toggleMenu(e) {
    e.preventDefault();
    e.stopPropagation();
    
    var isOpen = navList.classList.contains('is-open');
    
    if (isOpen) {
      navList.classList.remove('is-open');
      toggle.classList.remove('is-active');
      toggle.setAttribute('aria-expanded', 'false');
      toggle.setAttribute('aria-label', 'Open menu');
    } else {
      navList.classList.add('is-open');
      toggle.classList.add('is-active');
      toggle.setAttribute('aria-expanded', 'true');
      toggle.setAttribute('aria-label', 'Close menu');
    }
  }
  
  function closeMenu() {
    navList.classList.remove('is-open');
    toggle.classList.remove('is-active');
    toggle.setAttribute('aria-expanded', 'false');
    toggle.setAttribute('aria-label', 'Open menu');
  }
  
  // Handle click/touch on toggle button
  toggle.addEventListener('click', toggleMenu);
  
  // Close when clicking nav links
  var navLinks = navList.querySelectorAll('a');
  for (var i = 0; i < navLinks.length; i++) {
    navLinks[i].addEventListener('click', function() {
      closeMenu();
    });
  }
  
  // Close on Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && navList.classList.contains('is-open')) {
      closeMenu();
      toggle.focus();
    }
  });
  
  // Close on window resize to desktop
  window.addEventListener('resize', function() {
    if (window.innerWidth >= 1024) {
      closeMenu();
    }
  });
});
</script>
